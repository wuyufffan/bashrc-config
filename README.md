# bashrc-config

ğŸš è·¨ç¯å¢ƒ Bash é…ç½®ç®¡ç†å·¥å…·

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **å¤šç¯å¢ƒæ”¯æŒ**: æœ¬åœ°(base)ã€å®¹å™¨(docker)ã€ç™»å½•èŠ‚ç‚¹(login)ã€è®¡ç®—èŠ‚ç‚¹(compute)
- ğŸ” **è‡ªåŠ¨æ£€æµ‹**: æ™ºèƒ½è¯†åˆ«å½“å‰è¿è¡Œç¯å¢ƒ
- ğŸ“¦ **æ¨¡å—åŒ–è®¾è®¡**: æŒ‰éœ€åŠ è½½ä¸åŒåŠŸèƒ½æ¨¡å—
- ğŸ¨ **ä¸°å¯Œçš„å‘½ä»¤è¡Œå·¥å…·**: é¢œè‰²è¾“å‡ºã€è¿›åº¦æ˜¾ç¤ºã€äº¤äº’å¼é€‰æ‹©ç­‰
- ğŸŒ **ç½‘ç»œæµ‹è¯•**: å†…ç½®ç½‘ç»œè¿é€šæ€§æµ‹è¯•ã€ä»£ç†æ£€æµ‹ã€é•œåƒæºé€Ÿåº¦æµ‹è¯•
- ğŸ”„ **çƒ­é‡è½½**: é…ç½®ä¿®æ”¹åå³æ—¶ç”Ÿæ•ˆ
- ğŸ›¡ï¸ **å®‰å…¨å¤‡ä»½**: å®‰è£…å‰è‡ªåŠ¨å¤‡ä»½ç°æœ‰é…ç½®

## å¿«é€Ÿå¼€å§‹

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/wuyufffan/bashrc-config.git
cd bashrc-config

# è‡ªåŠ¨æ£€æµ‹ç¯å¢ƒå¹¶å®‰è£…
./install.sh

# æŒ‡å®šç¯å¢ƒå®‰è£…
./install.sh --env docker
```

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ envs/               # ç¯å¢ƒç‰¹å®šé…ç½®
â”‚   â”œâ”€â”€ base/           # åŸºç¡€é…ç½®ï¼ˆæ‰€æœ‰ç¯å¢ƒå…±äº«ï¼‰
â”‚   â”œâ”€â”€ docker/         # å®¹å™¨ç¯å¢ƒ
â”‚   â”œâ”€â”€ login/          # ç™»å½•èŠ‚ç‚¹
â”‚   â””â”€â”€ compute/        # è®¡ç®—èŠ‚ç‚¹
â”œâ”€â”€ lib/                # å·¥å…·å‡½æ•°åº“
â”‚   â””â”€â”€ detect_env.sh   # ç¯å¢ƒæ£€æµ‹
â”œâ”€â”€ install.sh          # å®‰è£…è„šæœ¬
â””â”€â”€ README.md
```

## å®‰è£…é€‰é¡¹

```bash
./install.sh [é€‰é¡¹]

é€‰é¡¹:
    -e, --env ENV       æŒ‡å®šç¯å¢ƒç±»å‹ (base|docker|login|compute)
    -f, --force         å¼ºåˆ¶è¦†ç›–ç°æœ‰é…ç½®
    -n, --no-backup     ä¸å¤‡ä»½ç°æœ‰é…ç½®
    -d, --dry-run       è¯•è¿è¡Œæ¨¡å¼
    -h, --help          æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

## ç¯å¢ƒè‡ªåŠ¨æ£€æµ‹è§„åˆ™

| æ£€æµ‹æ¡ä»¶ | ç¯å¢ƒç±»å‹ |
|---------|---------|
| `/.dockerenv` å­˜åœ¨ æˆ– cgroup åŒ…å« docker | docker |
| `$SLURM_JOB_ID` æˆ– `$PBS_JOBID` å­˜åœ¨ | compute |
| ä¸»æœºååŒ…å« compute/node/worker | compute |
| ä¸»æœºååŒ…å« login/mgmt/master | login |
| ä»¥ä¸Šéƒ½ä¸åŒ¹é… | base |

## ä½¿ç”¨æ–¹æ³•

### åœ¨ my_linux_config ä¸­ä½œä¸ºå­æ¨¡å—ä½¿ç”¨

```bash
# æ·»åŠ å­æ¨¡å—
git submodule add https://github.com/wuyufffan/bashrc-config.git submodules/bashrc-config

# å®‰è£…
cd submodules/bashrc-config
./install.sh
```

### è‡ªå®šä¹‰é…ç½®

ç”¨æˆ·è‡ªå®šä¹‰é…ç½®å­˜å‚¨åœ¨ `~/.bashrc.local`ï¼Œä¸ä¼šè¢«ç‰ˆæœ¬æ§åˆ¶è¦†ç›–ã€‚

```bash
# ç¼–è¾‘è‡ªå®šä¹‰é…ç½®
vim ~/.bashrc.local

# æ·»åŠ è‡ªå®šä¹‰åˆ«å
alias myproject='cd /path/to/project'

# æ·»åŠ ç¯å¢ƒå˜é‡
export MY_TOKEN="secret"
```

## ç½‘ç»œæµ‹è¯•åŠŸèƒ½

bashrc-config å†…ç½®ç½‘ç»œè¿é€šæ€§æµ‹è¯•æ¨¡å—ï¼Œæä¾›ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# å¿«é€Ÿæµ‹è¯•é»˜è®¤ç›®æ ‡ï¼ˆgithub.comï¼‰
nettest

# æµ‹è¯•æŒ‡å®šä¸»æœº
nettest www.google.com

# å®Œæ•´ç½‘ç»œæµ‹è¯•ï¼ˆDNSã€HTTPã€å¤šé•œåƒæºï¼‰
netfull

# æ£€æµ‹ä»£ç†è®¾ç½®
netproxy

# æµ‹è¯•å¹¶æ¨èæœ€å¿«çš„ PyPI é•œåƒæº
netpypi
```

### ç½‘ç»œæµ‹è¯•åŠŸèƒ½åŒ…æ‹¬ï¼š

| å‘½ä»¤ | åŠŸèƒ½è¯´æ˜ |
|------|---------|
| `nettest [host]` | å¿«é€Ÿæµ‹è¯•æŒ‡å®šä¸»æœºçš„ DNSã€Pingã€HTTP |
| `netfull` | å®Œæ•´ç½‘ç»œæµ‹è¯•æŠ¥å‘Š |
| `netproxy` | æ˜¾ç¤ºå½“å‰ä»£ç†ç¯å¢ƒå˜é‡ |
| `netpypi` | æµ‹è¯•å„å¤§ PyPI é•œåƒæºé€Ÿåº¦å¹¶æ¨èæœ€å¿«çš„ |

### é…ç½®ç½‘ç»œæµ‹è¯•

```bash
# è®¾ç½®æµ‹è¯•è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
export NETWORK_TEST_TIMEOUT=10

# è‡ªå®šä¹‰æµ‹è¯•ç›®æ ‡
NETWORK_TEST_HOSTS=("github.com" "gitlab.com" "myserver.com")
```

## è·¨ç¯å¢ƒé…ç½®åŒæ­¥

é€šè¿‡ Git å­æ¨¡å—æœºåˆ¶ï¼Œå¯ä»¥åœ¨ä¸åŒç¯å¢ƒé—´åŒæ­¥é…ç½®ï¼š

```bash
# åœ¨å·¥ä½œç«™ä¸Š
cd ~/my_linux_config
./install.sh --env base

# åœ¨å®¹å™¨ä¸­
cd ~/my_linux_config
./install.sh --env docker

# åœ¨è¶…ç®—ç™»å½•èŠ‚ç‚¹
./install.sh --env login

# åœ¨è®¡ç®—èŠ‚ç‚¹
./install.sh --env compute
```

## å¸è½½

```bash
# æ¢å¤å¤‡ä»½
mv ~/.bashrc.backup.XXXX ~/.bashrc

# æˆ–åˆ é™¤ç”Ÿæˆçš„é…ç½®
rm ~/.bashrc
```

## è®¸å¯

MIT License
